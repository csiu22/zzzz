<!DOCTYPE html>

<!--
  6.813/6.831 GR4
  Team ZZZZ
  Martin (Ding) Ma, Caitlin Mehl, Connie Siu, Linda Wang

  Home page
-->

<html>

<head>
<meta charset="UTF-8">
  <title>Zzzz</title>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.1/jquery.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.8/semantic.js"></script>

  <script type="text/javascript">
  /*
  NOTE: In order for javascript variables to be usable across different web pages, need to store it in local storage first before you leave the current page. For example:
  var playlist = ['music1']
  localStorage.setItem('playlist', JSON.stringify(playlist));

  And this is how you access the variable when you load up new page:
  var playlist = JSON.parse(localStorage.getItem('playlist'));
  */
  var playlist = JSON.parse(localStorage.getItem('playlist'));

  </script>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.8/semantic.css">
  <link rel="stylesheet" href="mainLayout.css">

<!--
  <link rel="stylesheet" type="text/css" href="semantic/dist/semantic.min.css">
  <script src="semantic/dist/semantic.min.js"></script>
-->
</head>
<body>


<h1 align='center'>
  ZZZZ
</h1>

<h3 align='center'>
  a randomized sleep aid for insomnia
</h3>

<h3 class="ui justified header">
  <div class="ui horizontal list">
    <div class="item">
      <span> <i class="add user icon"></i><br> 
        <input id="btnLogin" type="button" value="Login">
      </span>
    </div>
  </div>

  <div class="ui horizontal list">
    <div class="item">
      <span> <i class="heart icon"></i><i class="heart icon"></i><i class="heart icon"></i><br> 
        <input id="btnMyFavorites" type="button" value="My Favorites">
      </span>
    </div>
    <div class="item">
      <span> <i class="edit icon"></i><br> 
        <input id="btnMyJournal" type="button" value="My Journal">
      </span>
    </div>
  </div>

  <div class="ui horizontal list">
    <div class="item">
      <span> <i class="settings icon"></i><br>
        <input id="btnMySettings" type="button" value="My Settings">
      </span>
    </div>
  </div>
</h3>


<div id="content">
  <div class="journal">
    <h2>Journal Entry</h2>
    What's on your mind?<br>
    <input id='entry' type="text" value='Begin Typing' autofocus><br>
    <input id='btnSubmit' type='button' value='Submit'>
  </div>
</div>

  <h3 class = "ui justified header">
    <div class = "ui horizontal list">
      <div class="item">
        <span> <i class="arrow left icon"></i><br>
          <input id="btnBack" type="button" value="Back">
        </span>
      </div>
    </div>
    <div class="ui horizontal list">
      <div class="item">
        <span> <i class="heart icon"></i><br>
          <input id="btnFavorite" type="button" value="Favorite">
        </span>
      </div>
    </div>
    <div class = "ui horizontal list">
      <div class="item">
        <span> <i class="random icon" id = "shuffleIcon"></i><br>
          <input id="btnShuffle" type="button" value="Shuffle">
        </span>
      </div>
    </div>
  </h3>

<script type="text/javascript">

  $(document).ready(function() {
    backStack = [];
    forwardStack = [];
    document.getElementById('btnBack').disabled = true;

    //as of now, only used login button to test storing javascript variables across different webpages
    $('#btnLogin').click(function(e) {
      //initializes playlist
      var defaultPlaylist = ['journal1', 'video1', 'music1', 'binaural1', 'relaxation1', 'tips1']
      localStorage.setItem('playlist', JSON.stringify(defaultPlaylist));
      window.alert('Successful login! Current playlist: ' + JSON.stringify(defaultPlaylist));
      document.getElementById('btnLogin').disabled = true;
      //window.location.href = 'login.html';
    });


    $('#btnMyFavorites').click(function(e) {
      window.location.href = 'favorites.html';  //Connie please edit favorites.html file
    });

    $('#btnMySettings').click(function(e) {
      window.location.href = 'settings.html';  //Caitlin please edit settings.html file
    });

    $('#btnMyJournal').click(function(e) {
      window.location.href = 'journal.html';  //Linda please edit journal.html file
    });


    $('#btnShuffle').click(function(e) {
      document.getElementById('content').innerHTML = '';
      document.getElementById('btnBack').disabled = false;

      //goes forward instead of shuffle if there's stuff in forward stack
      if (forwardStack.length > 0) {
        console.log(forwardStack);
        contentName = forwardStack.pop();
        backStack.push(contentName);
        content = getContent(contentName);
        document.getElementById('content').appendChild(content);
        if (forwardStack.length == 0) {
          //changes forward button to shuffle button
          document.getElementById('btnShuffle').value = "Shuffle";
          document.getElementById('shuffleIcon').className = "random icon"
        }
      }

      //shuffle
      else {
        //playlist is hard-coded for now
        var playlist = ['journal1', 'video1', 'music1', 'binaural1', 'relaxation1', 'tips1']
        //randomly choose from playlist
        index = Math.floor(Math.random() * playlist.length);

        content = getContent(playlist[index]);
        backStack.push(playlist[index]);  //stores in back history
        console.log(backStack);
        document.getElementById('content').appendChild(content);
      }
    });


    $('#btnBack').click(function(e) { 
      document.getElementById('content').innerHTML = '';
      popped = backStack.pop();
      if (backStack.length > 0) {
        contentName = backStack[backStack.length-1];
      } else {
        contentName = 'default';
        document.getElementById('btnBack').disabled = true;
      }
      forwardStack.push(popped);
      content = getContent(contentName);
      console.log(contentName);
      document.getElementById('content').appendChild(content);
      //changes shuffle to forward
      document.getElementById('btnShuffle').value = "Forward";
      document.getElementById('shuffleIcon').className = "arrow right icon"
    });


    //given a content's name, returns the HTML of the content
    getContent = function(contentName) {
      var content = document.createElement('div');
      if (contentName == 'journal1') {
        content.innerHTML = "<h2>Journal Entry</h2> I can't sleep because I'M HANGRY >:[";
      }
      else if (contentName == 'video1') {
        content.innerHTML = "<h2>Video</h2> I can't sleep because I'M HANGRY >:[";
      }
      else if (contentName == 'music1') {
        content.innerHTML = "<h2>Music</h2> I can't sleep because I'M HANGRY >:[";
      }
      else if (contentName == 'binaural1') {
        content.innerHTML = "<h2>Binaural Beats</h2> I can't sleep because I'M HANGRY >:[";
      }
      else if (contentName == 'relaxation1') {
        content.innerHTML = "<h2>Relaxation</h2> I can't sleep because I'M HANGRY >:[";
      }
      else if (contentName == 'tips1') {
        content.innerHTML = "<h2>Tips & Quotes</h2> I can't sleep because I'M HANGRY >:[";
      }
      else {
        content.innerHTML = "<h2>Journal Entry</h2> What's on your mind?<br> <input id='entry' type='text' value='Begin Typing' autofocus><br> <input id='btnSubmit' type='button' value='Submit'> "; 

      }
      return content;
    }


  });

</script>



</body>

</html>
